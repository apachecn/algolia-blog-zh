<html>
<head>
<title>Build a store locator that includes online sellers - Algolia Blog | Algolia Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å»ºç«‹ä¸€ä¸ªåŒ…å«åœ¨çº¿å–å®¶çš„å•†åº—å®šä½å™¨- Algoliaåšå®¢</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://www.algolia.com/blog/engineering/build-a-store-locator-that-includes-online-sellers/#0001-01-01">https://www.algolia.com/blog/engineering/build-a-store-locator-that-includes-online-sellers/#0001-01-01</a></blockquote><div><div class="css-t54cg4"><p class="translated">å‡è®¾æ‚¨çš„ä»»åŠ¡æ˜¯æ„å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå¸®åŠ©æ¶ˆè´¹è€…æ‰¾åˆ°æä¾›ç‰¹å®šæœåŠ¡çš„æœºæ„ã€‚å…¶ä¸­ä¸€äº›æœºæ„æ˜¯å½“åœ°çš„å®ä½“åº—é¢ï¼Œå¦ä¸€äº›åˆ™æ˜¯æœåŠ¡äºåŒä¸€åœ°åŒºçš„çº¯åœ¨çº¿æœºæ„ã€‚</p>
<p class="translated">è¿™ä¸ªé—®é¢˜æœ€åˆæ˜¯ç”±Alejo Ariasåœ¨Algolia <a href="https://discourse.algolia.com/t/aroundlatlng-or-faceted/13655">è®ºå›</a>ä¸Šæå‡ºçš„:</p>
<blockquote><p class="translated">æˆ‘çš„ç´¢å¼•ä¸­æœ‰ä¸€ç³»åˆ—æä¾›è€…:</p>
<ul>
<li class="translated">ä¸€äº›æ˜¯å›½å®¶ä¾›åº”å•†(ä»–ä»¬æœ‰ä¸€ä¸ª<code>national: true</code>å±æ€§)</li>
<li class="translated">æœ‰äº›æ˜¯å·èŒƒå›´å†…çš„æä¾›å•†(ä»–ä»¬æœ‰ä¸€ä¸ª<code>state</code>å±æ€§å’Œä»–ä»¬æœåŠ¡çš„å·çš„åˆ—è¡¨ï¼Œä¾‹å¦‚<code>[â€œNYâ€, â€œFLâ€]</code>)</li>
<li class="translated">æœ‰äº›æ˜¯æœ¬åœ°çš„(å®ƒä»¬çš„<code>_geoloc</code>å±æ€§ä¸­æœ‰ç‰¹å®šçš„lat/lng)</li>
</ul>
<p class="translated"><strong>æˆ‘å¸Œæœ›åœ¨æˆ‘çš„æœç´¢ç»“æœä¸­åŒ…å«ä¸æˆ‘çš„ç”¨æˆ·ä½ç½®ç›¸è¿‘çš„æœ¬åœ°æä¾›å•†ç›¸åŒ¹é…çš„ä»»ä½•å†…å®¹ï¼ŒåŒæ—¶è¿˜æä¾›(ç›¸åŒçš„ç»“æœ)å·å’Œå›½å®¶æä¾›å•†</strong>ã€‚</p>
<p class="translated">æ·»åŠ ä¸€ä¸ª<code>aroundLatLng</code>æ»¤é•œä¼šè‡ªåŠ¨ç§»é™¤å…¶ä»–ç»“æœï¼Œæ— è®ºæˆ‘å°è¯•ä»€ä¹ˆæ ·çš„é¢æˆ–æ»¤é•œã€‚</p>
<p class="translated">æˆ‘æ€æ ·æ‰èƒ½å®ç°è¿™ä¸€ç‚¹ï¼Ÿ<br/>åŸºæœ¬ä¸Šæˆ‘æƒ³æœ‰è¿™æ ·çš„ä¸œè¥¿:<code>aroundLatLng: x,y OR state: NY OR national: true</code></p></blockquote>
<p class="translated">é‚£ä¹ˆï¼Œå¦‚ä½•å°†å®ä½“å•†åº—çš„åœ°ç†æœç´¢ç»“æœä¸åŸºäºå¸ƒå°”æˆ–æ–‡æœ¬çš„æŸ¥è¯¢ç»“æœç»“åˆèµ·æ¥å‘¢ï¼Ÿå¦‚ä½•æ„å»ºä¸€ä¸ªç•Œé¢æ¥ç»Ÿä¸€æ˜¾ç¤ºå®ƒä»¬å‘¢ï¼Ÿ</p>
<h2 class="translated"><a id="geographic-data-and-algolia-search" class="anchor" href="#geographic-data-and-algolia-search" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>åœ°ç†æ•°æ®å’ŒAlgoliaæœç´¢</h2>
<p class="translated">æ­£å¦‚Alejoæåˆ°çš„ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨è®°å½•ä¸Šæ·»åŠ ä¸€ä¸ªç‰¹æ®Šçš„<code>_geoloc</code>å±æ€§æ¥ä½¿ç”¨Algoliaè¿›è¡Œåœ°ç†æœç´¢ã€‚æ‚¨å¯ä»¥å°†ä¸€ç»„æˆ–å¤šç»„çº¬åº¦/ç»åº¦å…ƒç»„æ”¾å…¥è¯¥å±æ€§ï¼Œä»¥æŒ‡ç¤ºé“¾æ¥åˆ°è®°å½•çš„åœ°ç†ä½ç½®ã€‚</p>
<p class="translated">ç„¶åï¼Œæ‚¨ä½¿ç”¨Algoliaå®¢æˆ·ç«¯åº“æ¥æŸ¥è¯¢è¿™äº›åœ°ç†ç¼–ç è®°å½•â€”â€”è¿‡æ»¤å›ºå®šç‚¹å‘¨å›´çš„åŠå¾„(<code>aroundLatLong</code>)æˆ–å½¢çŠ¶å†…çš„åŒºåŸŸ(<code>insideBoundingBox</code>æˆ–<code>insidePolygon</code>)ã€‚æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†è¿™äº›æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¯»<a href="https://www.algolia.com/blog/engineering/building-a-store-locator-in-react-using-algolia-mapbox-and-twilio-part-1/">è¿™äº›æ–‡ç« </a>å¸¦ä½ æ„å»ºä¸€ä¸ªçº¯åœ°ç†çš„å•†åº—å®šä½å™¨ã€‚</p>
<p class="translated">ä½†æ˜¯ï¼Œæ‚¨ä¸èƒ½ä»åŒä¸€ä¸ªæŸ¥è¯¢ä¸­æå–åœ°ç†å’Œéåœ°ç†ç»“æœã€‚å¦‚æœæ‚¨æ­£åœ¨æœç´¢é‚»è¿‘æ€§ï¼Œç¼ºå°‘<code>_geoloc</code>å±æ€§çš„è®°å½•å°†ä¸ä¼šæ˜¾ç¤ºåœ¨ç»“æœé›†ä¸­ã€‚</p>
<p class="translated">é‚£ä¹ˆï¼Œå½“å¹¶éæ‰€æœ‰è®°å½•éƒ½æœ‰åœ°ç†åæ ‡æ—¶ï¼Œå¦‚ä½•æ‰§è¡Œè¿™ç§æœç´¢å‘¢ï¼Ÿ</p>
<h2 class="translated"><a id="a-single-index-solution" class="anchor" href="#a-single-index-solution" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>å•æŒ‡æ ‡è§£</h2>
<p class="translated">ä½ å¯ä»¥é€šè¿‡åœ°ç†æœç´¢æ¥åšæ‰€æœ‰çš„äº‹æƒ…ã€‚é€šè¿‡å°†<code>_geoloc</code>æ•°æ®æ·»åŠ åˆ°å·å’Œå›½å®¶è®°å½•ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨åœ°ç†æŸ¥è¯¢æ¥æœç´¢ä¸€åˆ‡ã€‚ä¾‹å¦‚ï¼Œå°†å…¨å·èŒƒå›´çš„æœºæ„æ”¾ç½®åœ¨æ¯ä¸ªå·ä¸­å¿ƒçš„åæ ‡ä¸Šã€‚è¿™æ˜¯æˆ‘æ·»åŠ åˆ°è®ºå›å¸–å­ä¸­çš„æœ€åˆè§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯è¿™ä¸ªè§£å†³æ–¹æ¡ˆæœ‰å‡ ä¸ªé—®é¢˜:</p>
<ol>
<li class="translated">Alejoç‰¹åˆ«æåˆ°ä¸€äº›æä¾›å•†è·¨è¶Šå¤šä¸ªå·</li>
<li class="translated">å°†æä¾›å•†æ”¾åœ¨å·çš„ä¸­å¿ƒä¼šç»™å±…ä½åœ¨å·è¾¹ç•Œé™„è¿‘çš„æ¶ˆè´¹è€…å¸¦æ¥ä¸å‡†ç¡®çš„ç»“æœ</li>
<li class="translated">å›½å®¶ä¾›åº”å•†éœ€è¦æ¯ä¸ªå·çš„è®°å½•</li>
</ol>
<h2 class="translated"><a id="a-multi-index-solution" class="anchor" href="#a-multi-index-solution" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>å¤šæŒ‡æ ‡è§£å†³æ–¹æ¡ˆ</h2>
<p class="translated">æˆ–è€…ï¼Œæ‚¨å¯ä»¥æ„å»ºä¸€ä¸ªå¤šç´¢å¼•è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­ä¸€ä¸ªç´¢å¼•ç”¨äºåŒ…å«åœ°ç†æ•°æ®çš„å®ä½“åº—é¢ï¼Œå¦ä¸€ä¸ªç´¢å¼•ç”¨äºå·å’Œå›½å®¶æä¾›å•†ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥å•ç‹¬æœç´¢è¿™ä¸¤ä¸ªæ•°æ®æºï¼Œå¹¶æ··åˆç»“æœé›†ã€‚è¿™ç§æ–¹æ³•è¦æ±‚æ¯æ¬¡æœç´¢ä¸¤æ¬¡AlgoliaæŸ¥è¯¢ï¼Œä½†å®ƒå°†å…è®¸æˆ‘ä»¬ä¿è¯ä»ä¸¤ç§ç±»å‹çš„æä¾›å•†é‚£é‡Œå¾—åˆ°ç»“æœã€‚</p>
<h2 class="translated"><a id="preparing-your-indices" class="anchor" href="#preparing-your-indices" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>å‡†å¤‡æ‚¨çš„æŒ‡æ•°</h2>
<p class="translated">é¦–å…ˆï¼Œä½ éœ€è¦ä¸€ä¸ªæœºæ„æ•°æ®é›†ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸€äº›èµ„æºä»å¤´æ„å»ºä¸€ä¸ªã€‚ä½ å¯ä»¥ä»åŒ¿ååœ°å€æ•°æ®å¼€å§‹ï¼Œè¿™ä¸ªæŠ¥å‘ŠåŒ…å«äº†ç¾å›½å¤§çº¦3000ä¸ªåœ°å€ã€‚ç„¶åï¼Œé€šè¿‡<a href="https://github.com/chuckmeyer/agency-finder/tree/main/scripts">å°è„šæœ¬</a>è¿è¡Œè¿™äº›åœ°å€ï¼Œæ·»åŠ è™šæ„çš„ä»£ç†åç§°ï¼Œå¹¶éšæœºå°†ä¸€äº›ä»£ç†æ ‡è®°ä¸ºâ€œé¦–é€‰â€ã€‚</p>
<pre class="lang:python decode:true ">def transform_records(addresses):&#13;
  address_records = []&#13;
  for address in addresses:&#13;
    record = {}&#13;
    record_geocode = {}&#13;
    # One in ten chance agency is preferred &#13;
    record['preferred'] = 10 == random.randint(1,10)&#13;
&#13;
    record['objectID'] = random_name.generate_name().title()&#13;
    if record['preferred']:&#13;
      record['name'] = f"{record['objectID']} Agency (Preferred)"&#13;
    else:&#13;
      record['name'] = f"{record['objectID']} Agency"&#13;
    record['address'] = address.get('address1')&#13;
    record['city'] = address.get('city')&#13;
    record['state'] = address.get('state')&#13;
    record['zip'] = address.get('postalCode')&#13;
    record_geocode['lat'] = address['coordinates']['lat']&#13;
    record_geocode['lng'] = address['coordinates']['lng']&#13;
    record['_geoloc'] = record_geocode&#13;
    address_records.append(record)&#13;
  return address_records&#13;
</pre>
<p class="translated">æ‚¨å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªè„šæœ¬ä¸ºç¬¬äºŒä¸ªç´¢å¼•ç”Ÿæˆå·çº§å’Œå·çº§æœºæ„ã€‚ä¸¤ä¸ªæ•°æ®é›†éƒ½é©»ç•™åœ¨<a href="https://github.com/chuckmeyer/agency-finder/tree/main/data">è¿™ä¸ªrepo </a>ä¸­ã€‚æ‚¨å¯ä»¥åœ¨ç°æœ‰çš„Algoliaå¸æˆ·ä¸‹ä»è¿™äº›æ•°æ®é›†åˆ›å»ºæŒ‡æ•°ï¼Œæˆ–è€…<a href="https://www.algolia.com/users/sign_up?utm_source=blog&amp;utm_medium=main-blog&amp;utm_campaign=devrel&amp;utm_id=agency-finder">æ³¨å†Œä¸€ä¸ªå…è´¹å¸æˆ·</a>å¹¶å»ºç«‹ä¸€ä¸ªæ–°çš„<code>agency_finder</code>åº”ç”¨ç¨‹åºã€‚</p>
<h2 class="translated"><a id="building-the-front-end" class="anchor" href="#building-the-front-end" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>å»ºç­‘å‰ç«¯</h2>
<p class="translated">æ—¢ç„¶æ‚¨å·²ç»å¡«å……äº†ç´¢å¼•ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™æ„å»ºå‰ç«¯äº†ã€‚Algoliaåœ¨InstantSearchåº“ä¸­çš„<code>geoSearch</code>ç»„ä»¶åŒ…æ‹¬ä¸€ä¸ªåŠ©æ‰‹ç»„ä»¶ï¼Œç”¨äºåˆå§‹åŒ–Google Maps APIï¼Œæ¸²æŸ“åœ°å›¾ï¼Œå¹¶å°†è¯¥åœ°å›¾ç»‘å®šåˆ°Algoliaç´¢å¼•ä¸­çš„åœ°ç†ä½ç½®æŸ¥è¯¢ã€‚è¿™æ˜¯æˆ‘ä¹‹å‰ç”¨æ¥æ„å»ºä¸€ä¸ª<a href="https://www.algolia.com/blog/engineering/building-a-covid-19-geosearch-index-using-csv-files-mongodb-or-graphql/">æ–°å† è‚ºç‚æ¡ˆä¾‹å¯è§†åŒ–å™¨</a>çš„åŒä¸€ä¸ªç»„ä»¶ã€‚ä½†æ˜¯ï¼Œå¯¹äºè¿™ä¸ªé¡¹ç›®ï¼Œæ‚¨å¸Œæœ›ç”¨æˆ·è¾“å…¥åœ°å€ï¼Œå¹¶ä½¿ç”¨Google Places APIä¸ºä»–ä»¬è§£æåœ°ç†ä½ç½®ä¿¡æ¯ã€‚äº‹å®è¯æ˜ï¼Œåœ¨InstantSearchä¸­ä½¿ç”¨å¼€ç®±å³ç”¨çš„ç»„ä»¶å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œå› æ­¤æ‚¨å°†ä»å¤´å¼€å§‹æ„å»ºè‡ªå·±çš„ç•Œé¢ã€‚</p>
<p class="translated">è¿™ç¯‡<a href="https://www.tracylum.com/blog/2017-05-20-autocomplete-an-address-with-a-react-form/">åšå®¢æ–‡ç« </a>ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåœ¨Reactä¸­æ„å»ºåœ°å€è‡ªåŠ¨å®Œæˆè¡¨å•çš„å¯é æ¨¡å‹ã€‚æ‚¨å°†ä½¿ç”¨å®ƒä½œä¸ºæ‚¨çš„<a href="https://github.com/chuckmeyer/agency-finder/tree/main/src/AgencyFinderForm.js"> <code>AgencyFinderForm</code> </a>ç»„ä»¶çš„åŸºç¡€ï¼Œä»¥å‘ˆç°åœ°å€è‡ªåŠ¨å®Œæˆè¾“å…¥å­—æ®µä»¥åŠåªè¯»å­—æ®µæ¥æ˜¾ç¤ºç»“æœåœ°å€ã€‚çº¬åº¦/ç»åº¦å­˜å‚¨åœ¨stateä¸­ï¼Œä½†æ²¡æœ‰æ˜¾ç¤ºåœ¨è¡¨å•ä¸Š</p>
<p class="translated">æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨Reactç»„ä»¶å‘¨å›´çš„Google <a href="https://cloud.google.com/blog/products/maps-platform/loading-google-maps-platform-javascript-modern-web-applications">åŒ…è£…å™¨</a>æ¥åˆå§‹åŒ–<code>google</code>å¯¹è±¡å¹¶æ·»åŠ ä½ç½®APIï¼Œä»è€Œä½¿åšå®¢ä¸­çš„ä»£ç ç°ä»£åŒ–ã€‚</p>
<pre class="lang:js decode:true">   renderForm = (status) =&gt; {&#13;
    switch (status) {&#13;
      case Status.SUCCESS:&#13;
        return ;&#13;
      default:&#13;
        return &lt;h3&gt;{status} ...&lt;/h3&gt;;&#13;
      };&#13;
  }&#13;
&#13;
  render() {&#13;
    return (&#13;
      &lt;div&gt;&#13;
        &lt;h1&gt;Find an Agency&lt;/h1&gt;&#13;
        &lt;p className='instructions'&gt;ğŸ” Search for your address to find the closest agencies.&lt;/p&gt;&#13;
        &lt;div className='left-panel'&gt;&#13;
          &lt;Wrapper apiKey={process.env.REACT_APP_GOOGLE_API_KEY} render={this.renderForm} libraries={["places"]} /&gt;&#13;
        &lt;/div&gt;&#13;
        &lt;div className='right-panel'&gt;&#13;
          &lt;AgencyFinderResults hits={this.state.results} /&gt;&#13;
        &lt;/div&gt;&#13;
      &lt;/div&gt;&#13;
    )&#13;
  }&#13;
}&#13;
</pre>
<p class="translated">æ¥ä¸‹æ¥ï¼Œå‘åŸºæœ¬è¡¨å•æ·»åŠ ä¸€ä¸ª<code>clear</code>æŒ‰é’®ã€‚</p>
<pre class="lang:js decode:true ">  handleClear() {&#13;
    this.setState(this.initialState);&#13;
    var input = document.getElementById('autocomplete');&#13;
    input.value = '';&#13;
    google.maps.event.removeListener(this.autocompleteListener);&#13;
    this.initAutocomplete();&#13;
  }&#13;
</pre>
<p class="translated">æœ€åï¼Œæ‚¨å°†ä½¿ç”¨ä»¥ä¸‹ä»£ç ä»Places APIæ¸…ç†å¤„ç†<code>address_components</code>:</p>
<pre class="lang:js decode:true ">  handlePlaceSelect() {&#13;
    const addressObject = this.autocomplete.getPlace();&#13;
    const address = addressObject.address_components.reduce((seed, { short_name, types }) =&gt; {&#13;
      types.forEach(t =&gt; {&#13;
        seed[t] = short_name;&#13;
      });&#13;
      return seed;&#13;
    }, {});&#13;
    [this setState](this.setState)({&#13;
      streetAddress: `${address.street_number} ${address.route}`,&#13;
      city: address.locality ? address.locality : address.sublocality_level_1,&#13;
      state: address.administrative_area_level_1,&#13;
      zipCode: address.postal_code,&#13;
      geoCode: addressObject.geometry.location.lat() + ', ' + addressObject.geometry.location.lng(),&#13;
    });&#13;
  }&#13;
</pre>
<h2 class="translated"><a id="querying-for-results" class="anchor" href="#querying-for-results" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>æŸ¥è¯¢ç»“æœ</h2>
<p class="translated">å½“ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªä½ç½®ï¼Œå¹¶ä¸”ç»„ä»¶çŠ¶æ€ä¸­å­˜å‚¨äº†çº¬åº¦ã€ç»åº¦å’Œåœ°å€ä¿¡æ¯ä¹‹åï¼Œå°±å¯ä»¥æŸ¥è¯¢ç´¢å¼•äº†ã€‚æ‚¨ä½¿ç”¨æ¥è‡ª<a href="https://www.algolia.com/doc/api-reference/api-methods/multiple-queries/?client=javascript"> Javascript APIå®¢æˆ·ç«¯</a>çš„<code>multipleQueries</code>æ–¹æ³•å°†ä¸¤ä¸ªæŸ¥è¯¢æ‰¹å¤„ç†åœ¨ä¸€èµ·å¹¶ç»„åˆç»“æœã€‚è¿™ä»ç„¶ç®—ä½œä¸¤æ¬¡æŸ¥è¯¢ï¼Œä½†å®ƒå‡å°‘äº†åˆ°APIçš„å¾€è¿”æ¬¡æ•°ã€‚</p>
<pre class="lang:js decode:true ">handleSubmit(event) {&#13;
    const queries = [{&#13;
      indexName: statesIndex,&#13;
      query: this.state.state,&#13;
      params: {&#13;
        hitsPerPage: 10&#13;
      }&#13;
    }, {&#13;
      indexName: geoIndex,&#13;
      query: '',&#13;
      params: {&#13;
        aroundLatLng: this.state.geoCode,&#13;
        facetFilters: [ this.state.preferred ? 'preferred:true' : '' ],&#13;
        hitsPerPage: 10,&#13;
      }&#13;
    }];&#13;
    &#13;
    this.searchClient.multipleQueries(queries).then(({ results }) =&gt; {&#13;
      let allHits = [];&#13;
      results.map((result) =&gt; {&#13;
        return allHits.push(...result.hits);&#13;
      });&#13;
      this.props.handleCallback(allHits);&#13;
    });&#13;
  }&#13;
</pre>
<p class="translated">é¦–å…ˆï¼Œåˆå§‹åŒ–ä¸¤ä¸ªæŸ¥è¯¢ã€‚è¯·æ³¨æ„<code>multipleQueries</code>æ–¹æ³•å¦‚ä½•å…è®¸æˆ‘ä»¬æ··åˆåœ°ç†å’ŒåŸºäºå­—ç¬¦ä¸²çš„æŸ¥è¯¢ï¼Œç”šè‡³ä¸ºæ‚¨çš„â€œé¦–é€‰â€æœºæ„æ·»åŠ ä¸€ä¸ª<br/>å¯é€‰çš„<code>facetFilter</code>ã€‚ç„¶åå°†æŸ¥è¯¢æ•°ç»„ä¼ é€’ç»™å®¢æˆ·æœºã€‚å“åº”åŒ…æ‹¬æ¥è‡ªæ¯ä¸ª<br/>æŸ¥è¯¢çš„å•ä¸ªç»“æœï¼Œä½†æ˜¯æ‚¨å¯ä»¥å°†æ¥è‡ªä¸¤ä¸ªç»“æœé›†çš„<code>hits</code>åˆ†è§£åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™<code>AgencyFinderResults</code>ç»„ä»¶ã€‚</p>
<h2 class="translated"><a id="putting-it-all-together" class="anchor" href="#putting-it-all-together" aria-hidden="true"> <svg aria-hidden="true" class="octicon octicon-link" version="1.1" viewbox="0 0 16 16"> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/> </svg> </a>æŠŠæ‰€æœ‰çš„ä¸œè¥¿æ”¾åœ¨ä¸€èµ·</h2>
<p class="translated">ç°åœ¨ï¼Œæ‚¨æœ‰äº†ä¸€ä¸ªå¯é çš„æ¦‚å¿µéªŒè¯Reactç»„ä»¶ï¼Œå¯ä»¥å°†åœ°ç†å’Œéåœ°ç†ç»“æœåˆ†å±‚åˆ°ä¸€ä¸ªç»“æœé›†ä¸­ã€‚æ­¤æ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ·»åŠ Googleåœ°å›¾æ¥æ˜¾ç¤ºåœ°ç†ç»“æœï¼Œä»è€Œæ”¹è¿›ç¤ºä¾‹ã€‚æ‚¨è¿˜å¯ä»¥è½¬å›åˆ°å•ä¸ªç´¢å¼•ï¼Œä½¿ç”¨<code>multipleQueries</code>åŠŸèƒ½ç”¨ä¸åŒçš„å‚æ•°å¤šæ¬¡æŸ¥è¯¢åŒä¸€ä¸ªç´¢å¼•ã€‚</p>
<p class="translated">å®Œæ•´çš„ä¾‹å­å¯ä»¥åœ¨è¿™ä¸ª<a href="https://github.com/chuckmeyer/agency-finder"> Github repo </a>ä¸­æ‰¾åˆ°ï¼Œæˆ–è€…ä½ å¯ä»¥å°è¯•ä¸€ä¸ª<a href="https://agency-finder.vercel.app/">ç°åœºæ¼”ç¤º</a>ã€‚</p>
</div></div>    
</body>
</html>